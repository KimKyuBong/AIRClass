# ============================================
# AIRClass 환경 설정 예제
# ============================================
# 이 파일을 복사하여 사용하세요:
#   ./setup.sh  (권장 - 자동 설정)
# 또는:
#   cp .env.example .env
#   nano .env  (수동 편집)

# ============================================
# 서버 설정 (필수)
# ============================================

# 서버의 실제 IP 주소
# 학생들이 접속할 주소입니다
# 확인 방법:
#   macOS: ifconfig | grep "inet " | grep -v 127.0.0.1
#   Linux: hostname -I
#   Windows: ipconfig
# 예: 10.100.0.102, 192.168.1.100
SERVER_IP=10.100.0.102

# 프론트엔드 백엔드 URL
# 일반적으로 SERVER_IP와 동일하게 설정
VITE_BACKEND_URL=http://10.100.0.102:8000

# ============================================
# 보안 설정 (필수)
# ============================================

# JWT 암호화 키 (절대로 공개하지 마세요!)
# 자동 생성 권장: openssl rand -hex 32
JWT_SECRET_KEY=change-this-secret-key-in-production

# 클러스터 보안 키
# Main과 Sub 노드가 서로를 인증하는 비밀번호
# 같은 네트워크에 여러 선생님이 있어도 안전하게 구분
# 예: myclass2025, math101, room503
CLUSTER_SECRET=airclass2025

# ============================================
# CORS 설정
# ============================================

# CORS 허용 도메인
# 개발: * (모든 도메인 허용)
# 프로덕션: http://example.com (특정 도메인만)
CORS_ORIGINS=*

# ============================================
# 클러스터 설정 (선택)
# ============================================

# Main 노드에서 WebRTC 직접 사용 여부
# false: Sub 노드로 부하 분산 (권장, 기본값)
# true: Main 노드에서 직접 WebRTC 처리 (개발/테스트용)
USE_MAIN_WEBRTC=false

# ============================================
# 포트 범위 (같은 PC에서 여러 인스턴스 실행 시)
# ============================================
# 기본(PORT_OFFSET=0): Main 8000,1935,8889,8189 / Sub1 8001,8890,8190 / Sub2 8002,8891,8191 / Sub3 8003,8892,8192
# 두 번째 인스턴스: ./scripts/gen-port-range.sh 100 >> .env  → Main 8100,2035,8989,8289 / Sub1 8101,8990,8290 ...
# 빈 포트 자동 탐지: ./scripts/gen-port-range.sh auto >> .env  (네트워크 상황에 맞게 첫 번째 빈 범위 사용)
# PORT_OFFSET=0

# 자동 검색 시 메인 노드 후보 포트 (쉼표 구분). 동적 포트 사용 시 여기에 사용 중인 범위 추가
# DISCOVERY_PORTS=8000,8100,8200,8300

# ============================================
# 고급 설정 (일반적으로 변경 불필요)
# ============================================

# 노드당 최대 연결 수
# MAX_CONNECTIONS=150

# JWT 토큰 만료 시간 (분 단위)
# JWT_EXPIRATION_MINUTES=60

# MediaMTX 포트
# WEBRTC_PORT=8889
# RTMP_PORT=1935

# HTTPS 프론트에서 Mixed Content 방지 (개발/테스트)
# 프론트 origin 지정 시 WHEP 요청이 같은 origin으로 가서 Vite proxy로 전달됨
# 예: WHEP_BASE_URL=https://localhost:5175
# WHEP_BASE_URL=

# 로그 레벨 (debug | info | warn)
# LOG_LEVEL=info
