# ============================================
# AIRClass Environment Configuration
# ============================================
# Copy this file to .env and customize for your deployment
#
# Usage:
#   cp .env.example .env
#   nano .env  # Edit with your values
#   docker-compose up -d

# ============================================
# DEPLOYMENT MODE
# ============================================
# Options: standalone | master | slave
# - standalone: Single server (50-150 users)
# - master: Traffic router (doesn't stream)
# - slave: Streaming server (registers to master)
MODE=standalone

# ============================================
# CLUSTER CONFIGURATION (for Master/Slave mode)
# ============================================
# Master URL (required for slave mode)
MASTER_URL=http://master:8000

# Node identification (auto-generated if not set)
NODE_ID=
NODE_NAME=
NODE_HOST=
NODE_PORT=8000

# ============================================
# CAPACITY LIMITS
# ============================================
# Maximum concurrent connections per slave
MAX_CONNECTIONS=150

# HLS segment settings (affects latency)
HLS_SEGMENT_COUNT=7
HLS_SEGMENT_DURATION=1s

# ============================================
# SECURITY
# ============================================
# JWT Secret Key (CHANGE IN PRODUCTION!)
# Generate with: openssl rand -hex 32
JWT_SECRET_KEY=change-this-in-production-use-openssl-rand-hex-32

# JWT Token expiration (in seconds)
JWT_EXPIRATION=3600

# CORS origins (comma-separated)
CORS_ORIGINS=http://localhost:5173,http://localhost:5174

# ============================================
# NETWORK PORTS
# ============================================
# Backend API port
BACKEND_PORT=8000

# RTMP streaming port (for Android app)
RTMP_PORT=1935

# HLS output port (for web clients)
HLS_PORT=8888

# WebSocket port (for chat)
WS_PORT=8000

# ============================================
# MEDIAMTX CONFIGURATION
# ============================================
# Enable/disable protocols
RTMP_ENABLED=true
HLS_ENABLED=true
WEBRTC_ENABLED=false

# HLS variant (lowLatency | standard)
HLS_VARIANT=lowLatency

# Log level (debug | info | warn)
LOG_LEVEL=info

# ============================================
# PERFORMANCE TUNING
# ============================================
# Uvicorn workers (1 per CPU core recommended)
WORKERS=4

# Max request body size (for file uploads)
MAX_UPLOAD_SIZE=100MB

# Connection timeout (seconds)
TIMEOUT=60

# ============================================
# MONITORING (optional)
# ============================================
# Enable Prometheus metrics
PROMETHEUS_ENABLED=false
PROMETHEUS_PORT=9090

# Enable health check endpoint
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30

# ============================================
# STORAGE (optional)
# ============================================
# Enable stream recording
RECORDING_ENABLED=false
RECORDING_PATH=/recordings

# Recording format (hls | mp4)
RECORDING_FORMAT=mp4

# ============================================
# DATABASE (future feature)
# ============================================
# Database URL (not implemented yet)
# DATABASE_URL=postgresql://user:pass@localhost/airclass

# ============================================
# DEVELOPMENT OPTIONS
# ============================================
# Enable auto-reload (development only!)
AUTO_RELOAD=false

# Enable debug mode
DEBUG=false

# Enable verbose logging
VERBOSE=false

# ============================================
# DOCKER SPECIFIC
# ============================================
# Compose project name
COMPOSE_PROJECT_NAME=airclass

# Network mode (bridge | host)
NETWORK_MODE=bridge

# Restart policy (no | always | on-failure | unless-stopped)
RESTART_POLICY=unless-stopped
