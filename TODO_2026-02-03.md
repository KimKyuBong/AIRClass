# 🎯 AIRClass 남은 과제 목록

**작성일:** 2026년 2월 3일 20:40  
**프로젝트 진행률:** 95% 완료  
**전체 과제:** 8개

---

## 📊 과제 현황 요약

```
🔴 긴급 (이번 주):    2개
🟡 중요 (2-4주):      3개  
🟢 계획 (1-3개월):    3개
─────────────────────────
총 남은 과제:         8개
```

---

## 🔴 긴급 과제 (이번 주 완료 필요)

### 과제 #1: VOD API 테스트 수정
- **우선순위:** 🔴 긴급
- **예상 소요 시간:** 2-3시간
- **담당:** 백엔드 개발자
- **마감일:** 2026-02-04 (내일)

**현재 상태:**
- ✅ API 구현 완료 (`routers/vod.py`)
- ✅ 25개 테스트 작성
- ⚠️ FastAPI Depends 의존성 모킹 이슈로 테스트 실패

**문제 설명:**
```python
# 테스트에서 Depends(get_vod_service)를 모킹할 때
# FastAPI가 실제 의존성을 주입하려고 시도함

@router.get("/vod/list")
async def list_vod(
    vod_service: VODService = Depends(get_vod_service)  # 모킹 필요
):
    return await vod_service.list_recordings()
```

**해결 방법:**
1. `conftest.py`에 `mock_vod_service` fixture 추가
2. `app.dependency_overrides` 설정
3. 25개 테스트 실행 및 검증

**체크리스트:**
- [ ] `conftest.py`에 fixture 추가
- [ ] `app.dependency_overrides` 구현
- [ ] 25개 테스트 모두 통과
- [ ] 테스트 커버리지 90% 이상 확인
- [ ] 코드 리뷰 요청
- [ ] 문서 업데이트

**참고 파일:**
- `backend/tests/routers/test_vod.py`
- `backend/tests/conftest.py`
- `backend/routers/vod.py`

---

### 과제 #2: ICE 연결 최종 검증
- **우선순위:** 🔴 긴급
- **예상 소요 시간:** 1-2시간
- **담당:** 백엔드/프론트엔드 개발자
- **마감일:** 2026-02-05 (금요일)

**현재 상태:**
- ✅ WHEP 시그널링 성공 (201 Created)
- ✅ SDP Answer 수신
- ⚠️ 다양한 네트워크 환경에서 비디오 재생 확인 필요

**테스트 환경:**
1. **로컬 (같은 머신)** - Docker ↔ 호스트 브라우저
2. **LAN (같은 네트워크)** - 다른 PC에서 접속
3. **WAN (외부 네트워크)** - 공인 IP 또는 포트 포워딩

**테스트 절차:**
```bash
# 1. FFmpeg 테스트 스트림 시작
ffmpeg -re -stream_loop -1 \
  -f lavfi -i testsrc=size=1280x720:rate=30 \
  -f lavfi -i sine=frequency=1000:sample_rate=44100 \
  -c:v libx264 -preset veryfast -b:v 2000k \
  -c:a aac -b:a 128k \
  -f flv rtmp://localhost:1935/live/stream

# 2. 브라우저 접속
# http://localhost:5173/#/student

# 3. Playwright 자동 테스트
cd /Users/hwansi/Project/AirClass
INSECURE_HTTPS=1 node scripts/tests/show_browser_test.js
```

**체크리스트:**
- [ ] 로컬 환경 비디오 재생 확인
- [ ] 지연 시간 측정 (< 1초 목표)
- [ ] LAN 환경 다른 PC에서 테스트
- [ ] 패킷 손실률 측정 (< 2% 목표)
- [ ] 문제 발생 시 해결 방법 문서화
- [ ] ICE 연결 상태 로그 수집

**참고 파일:**
- `scripts/tests/show_browser_test.js`
- `backend/mediamtx-sub.yml`
- `docker-compose.yml`

---

## 🟡 중요 과제 (2-4주 내 완료)

### 과제 #3: Dashboard API 구현
- **우선순위:** 🟡 중요
- **예상 소요 시간:** 1일 (8시간)
- **담당:** 백엔드 개발자
- **마감일:** 2026-02-10 (다음 주 월요일)

**목표:**
통합 대시보드 API로 수업 통계, 참여도, 퀴즈 결과를 한 번에 조회

**구현할 엔드포인트:**
```python
GET /dashboard/summary
  - 전체 수업 통계
  - 총 참여 학생 수
  - 평균 참여도
  - 퀴즈 통계

GET /dashboard/session/{session_id}
  - 특정 수업 상세 정보
  - 참여도 시계열 데이터
  - 퀴즈 결과
  - 녹화 정보

GET /dashboard/engagement/trend
  - 참여도 추세 분석
  - 시간대별 패턴
  - 학생별 비교

GET /dashboard/quiz/analytics
  - 퀴즈 통계
  - 정답률 분석
  - 난이도 평가
```

**체크리스트:**
- [ ] `services/dashboard_service.py` 생성
- [ ] `routers/dashboard.py` 구현
- [ ] `schemas/dashboard.py` 스키마 정의
- [ ] 4개 주요 엔드포인트 구현
- [ ] 15-20개 테스트 작성
- [ ] 테스트 100% 통과
- [ ] API 문서 작성 (Swagger)
- [ ] 프론트엔드 통합 가이드 작성

**데이터 소스:**
- MongoDB `sessions` 컬렉션
- MongoDB `engagement_data` 컬렉션
- MongoDB `quizzes` 및 `quiz_responses` 컬렉션
- MongoDB `recordings` 컬렉션

---

### 과제 #4: 부하 테스트
- **우선순위:** 🟡 중요
- **예상 소요 시간:** 2일 (16시간)
- **담당:** 백엔드/DevOps
- **마감일:** 2026-02-17 (2주 후)

**목표:**
실제 환경에서 100명 이상 동시 접속 테스트 및 성능 검증

**테스트 시나리오 1: WebRTC 스트리밍 부하**
```python
# scripts/tests/load_test_streaming.py
# 100명의 가상 학생이 동시에 WebRTC 스트림 수신
```

**측정 항목:**
- CPU 사용률 (Main, Sub 노드)
- 메모리 사용량
- 네트워크 대역폭
- 평균 지연 시간
- 패킷 손실률
- 연결 성공률

**테스트 시나리오 2: API 부하**
```python
# scripts/tests/load_test_api.py
# 퀴즈 발행, 응답 제출 동시 처리
```

**목표 성능:**
- ✅ 100명 동시 스트리밍: 안정적
- ✅ CPU 사용률: < 60%
- ✅ 메모리 사용: < 2GB
- ✅ 평균 지연: < 1초
- ✅ 패킷 손실: < 2%

**체크리스트:**
- [ ] 스트리밍 부하 테스트 스크립트 작성
- [ ] API 부하 테스트 스크립트 작성
- [ ] 테스트 환경 준비 (Docker 스케일링)
- [ ] 50명 동시 접속 테스트
- [ ] 100명 동시 접속 테스트
- [ ] 성능 데이터 수집
- [ ] 병목 지점 식별
- [ ] 성능 보고서 작성
- [ ] 최적화 방안 제시

---

### 과제 #5: HTTPS/TLS 설정
- **우선순위:** 🟡 중요
- **예상 소요 시간:** 1일 (8시간)
- **담당:** DevOps/백엔드
- **마감일:** 2026-02-20 (3주 후)

**목표:**
프로덕션 환경에서 안전한 HTTPS 통신 구현

**구현 방법 (옵션 선택 필요):**

**옵션 1: Let's Encrypt (무료, 권장)**
```bash
# Certbot 설치 및 인증서 발급
sudo apt-get install certbot
sudo certbot certonly --standalone -d airclass.example.com

# 자동 갱신 설정
sudo certbot renew --dry-run
```

**옵션 2: 자체 서명 인증서 (개발/내부용)**
```bash
# 인증서 생성
openssl req -x509 -nodes -days 365 -newkey rsa:2048 \
  -keyout /etc/ssl/private/airclass-selfsigned.key \
  -out /etc/ssl/certs/airclass-selfsigned.crt
```

**체크리스트:**
- [ ] 인증서 발급 방법 결정 (Let's Encrypt vs 자체 서명)
- [ ] Nginx 설치 및 설정
- [ ] SSL 인증서 설치
- [ ] HTTP → HTTPS 리다이렉트 설정
- [ ] WebSocket WSS 지원 확인
- [ ] Docker Compose 업데이트
- [ ] 자동 갱신 설정 (Let's Encrypt)
- [ ] 보안 헤더 추가 (HSTS, CSP 등)
- [ ] 테스트 (SSL Labs 점수 A+ 목표)
- [ ] 문서 업데이트

**참고 파일:**
- `docker-compose.yml` (Nginx 추가)
- `nginx.conf` (생성 필요)
- `docs/PRODUCTION_DEPLOYMENT.md`

---

## 🟢 계획 과제 (1-3개월 내)

### 과제 #6: Grafana 모니터링 대시보드
- **우선순위:** 🟢 계획
- **예상 소요 시간:** 1주일 (40시간)
- **담당:** DevOps
- **마감일:** 2026-03-03 (1개월 후)

**목표:**
실시간 시스템 모니터링 및 알림 시스템 구축

**구성 요소:**
```yaml
# docker-compose.yml 추가
prometheus:
  image: prom/prometheus
  ports: ["9090:9090"]

grafana:
  image: grafana/grafana
  ports: ["3000:3000"]
```

**대시보드 패널:**
1. 시스템 리소스 (CPU, 메모리, 네트워크)
2. 스트리밍 메트릭 (스트림 수, 시청자 수, 비트레이트)
3. API 메트릭 (요청 수, 응답 시간, 에러율)
4. 비즈니스 메트릭 (수업 수, 참여 학생, 퀴즈 참여율)

**알림 설정:**
- CPU > 80% 5분 이상
- 메모리 > 90%
- 에러율 > 5%
- 노드 다운

**체크리스트:**
- [ ] Prometheus 설정 파일 작성
- [ ] Grafana 데이터소스 연결
- [ ] 대시보드 4개 패널 구성
- [ ] 알림 룰 설정
- [ ] Slack/Email 알림 연동
- [ ] 문서 작성

---

### 과제 #7: 실제 AI 모델 통합
- **우선순위:** 🟢 계획
- **예상 소요 시간:** 2주일 (80시간)
- **담당:** AI/ML 엔지니어
- **마감일:** 2026-03-17 (6주 후)

**목표:**
Mock 구현을 실제 AI 모델로 대체

**AI 비전 (OCR, 객체 탐지)**
- Tesseract OCR (한글 지원)
- YOLO v8 객체 탐지
- 복잡도 계산 알고리즘

**AI NLP (감정 분석, 의도 분류)**
- KoBERT 감정 분석
- 의도 분류 모델
- 키워드 추출

**체크리스트:**
- [ ] Tesseract 설치 및 한글 데이터 추가
- [ ] YOLO v8 모델 다운로드 및 통합
- [ ] KoBERT 모델 파인튜닝
- [ ] `services/ai/vision.py` 실제 구현
- [ ] `services/ai/nlp.py` 실제 구현
- [ ] 성능 테스트 (처리 시간, 정확도)
- [ ] 기존 테스트 통과 확인
- [ ] GPU 지원 추가 (선택)
- [ ] 문서 업데이트

**참고:**
- 현재는 Mock 구현으로 기능은 작동하지만 실제 분석은 안 됨
- 프로덕션 배포 전 반드시 완료 필요

---

### 과제 #8: iOS 앱 개발
- **우선순위:** 🟢 계획
- **예상 소요 시간:** 1개월 (160시간)
- **담당:** iOS 개발자
- **마감일:** 2026-04-03 (2개월 후)

**목표:**
iOS에서도 안드로이드와 동일한 RTMP 송출 기능 제공

**기술 스택:**
- Swift 5.9+
- ReplayKit (화면 녹화)
- VideoToolbox (H.264 인코딩)
- RTMP 라이브러리 (HaishinKit)

**주요 기능:**
- 화면 캡처 (ReplayKit)
- H.264 하드웨어 인코딩
- RTMP 스트리밍
- 설정 화면 (해상도, FPS, 비트레이트)
- 연결 상태 표시
- 자동 재연결

**체크리스트:**
- [ ] Xcode 프로젝트 생성
- [ ] ReplayKit 화면 캡처 구현
- [ ] VideoToolbox 인코딩 구현
- [ ] RTMP 라이브러리 통합
- [ ] UI/UX 디자인 (안드로이드와 유사)
- [ ] 설정 화면 구현
- [ ] 에러 처리 및 자동 재연결
- [ ] 테스트 (iPhone 12 이상)
- [ ] App Store 등록 준비
- [ ] 문서 작성

**참고:**
- 안드로이드 앱 완성도를 참고
- 기존 백엔드는 수정 없이 바로 연동 가능

---

## 📋 전체 체크리스트

### 이번 주 (2026-02-03 ~ 02-09)
- [ ] #1 VOD API 테스트 수정
- [ ] #2 ICE 연결 검증
- [ ] 문서 최신화 확인

### 2주차 (2026-02-10 ~ 02-16)
- [ ] #3 Dashboard API 구현
- [ ] 부하 테스트 스크립트 작성 시작

### 3주차 (2026-02-17 ~ 02-23)
- [ ] #4 부하 테스트 완료
- [ ] #5 HTTPS/TLS 설정 시작

### 4주차 (2026-02-24 ~ 03-02)
- [ ] #5 HTTPS/TLS 설정 완료
- [ ] 프로덕션 배포 준비

### 1개월 후 (2026-03-03 ~)
- [ ] #6 Grafana 모니터링
- [ ] #7 실제 AI 모델 통합

### 2개월 후 (2026-04-03 ~)
- [ ] #8 iOS 앱 개발

---

## 🎯 마일스톤

### Milestone 1: 백엔드 완성 ✅ (완료)
- [x] 코드 구조 계층화
- [x] MongoDB 통합
- [x] 201개 테스트 통과
- **달성일:** 2026-02-03

### Milestone 2: API 완전 구현 (진행 중, 95%)
- [x] 10개 라우터 완성
- [ ] VOD API 테스트 통과
- [ ] Dashboard API 구현
- **목표일:** 2026-02-10

### Milestone 3: 프로덕션 준비 (계획, 0%)
- [ ] 부하 테스트 (100명+)
- [ ] HTTPS/TLS 설정
- [ ] 모니터링 대시보드
- **목표일:** 2026-02-28

### Milestone 4: AI 및 모바일 확장 (계획, 0%)
- [ ] 실제 AI 모델 통합
- [ ] iOS 앱 출시
- [ ] 성능 최적화
- **목표일:** 2026-04-30

---

## 📊 진행률 추적

```
전체 과제: 8개
├─ 완료: 0개 (0%)
├─ 진행 중: 2개 (25%)
└─ 미시작: 6개 (75%)

긴급 과제 (2개): 0% 완료
중요 과제 (3개): 0% 완료
계획 과제 (3개): 0% 완료

프로젝트 전체 진행률: 95%
```

---

## 📞 의사결정 필요 사항

### 즉시 결정 필요
1. **VOD 테스트:** 지금 즉시 수정 vs Dashboard 먼저 구현
   - 권장: 즉시 수정 (2-3시간이면 완료)

2. **부하 테스트 목표:** 100명 vs 200명 vs 450명
   - 권장: 100명부터 시작

3. **HTTPS 방식:** Let's Encrypt vs 자체 서명 vs 상용 인증서
   - 권장: Let's Encrypt (무료, 자동 갱신)

### 향후 논의 필요
4. **AI 모델:** 클라우드 API vs 자체 모델
5. **iOS 개발 일정:** 내부 개발 vs 외주
6. **프로덕션 서버:** 클라우드 (AWS, GCP) vs 온프레미스

---

## 📚 참고 문서

### 프로젝트 문서
- [PROGRESS.md](PROGRESS.md) - 전체 진행 상황
- [docs/PROJECT_STATUS.md](docs/PROJECT_STATUS.md) - 프로젝트 상태
- [docs/NEXT_STEPS.md](docs/NEXT_STEPS.md) - 다음 단계 상세
- [backend/docs/CURRENT_TASKS.md](backend/docs/CURRENT_TASKS.md) - 백엔드 과제

### 기술 문서
- [docs/CLUSTER_ARCHITECTURE.md](docs/CLUSTER_ARCHITECTURE.md) - 클러스터 구조
- [docs/SECURITY_IMPLEMENTATION.md](docs/SECURITY_IMPLEMENTATION.md) - 보안
- [docs/DOCKER_DEPLOYMENT.md](docs/DOCKER_DEPLOYMENT.md) - Docker 배포

---

## 🆘 도움 요청

### 기술 지원 필요
- VOD 테스트 FastAPI Depends 모킹 방법
- 부하 테스트 도구 추천 (Locust vs K6 vs Artillery)
- iOS RTMP 라이브러리 선택

### 리소스 필요
- GPU 서버 (AI 모델 학습용)
- 부하 테스트용 서버 (클라우드 인스턴스)
- iOS 개발자 (외주 or 채용)

---

**작성자:** AIRClass Team  
**다음 업데이트:** 2026-02-10 (Dashboard 완료 시)  
**문의:** 프로젝트 관리자

---

## 📝 변경 이력

| 날짜 | 버전 | 변경 내용 |
|------|------|----------|
| 2026-02-03 | 1.0 | 초안 작성 (8개 과제) |
